{"helptext": [" automatically fix the 6 out-of-plane motion parameters to", "       their 'do nothing' values, so you don't have to specify '-parfix'.", "", " -master mmm = Write the output dataset on the same grid as dataset", "               'mmm'.  If this option is NOT given, the base dataset", "               is the master.", "       **N.B.: 3dAllineate transforms the source dataset to be 'similar'", "               to the base image.  Therefore, the coordinate system", "               of the master dataset is interpreted as being in the", "               reference system of the base image.  It is thus vital", "               that these finite 3D volumes overlap, or you will lose data!", "       **N.B.: If 'mmm' is the string 'SOURCE', then the source dataset", "               is used as the master for the output dataset grid.", "               You can also use 'BASE', which is of course the default.", "", " -mast_dxyz del = Write the output dataset using grid spacings of", "  *OR*            'del' mm.  If this option is NOT given, then the", " -newgrid del     grid spacings in the master dataset will be used.", "                  This option is useful when registering low resolution", "                  data (e.g., EPI time series) to high resolution", "                  datasets (e.g., MPRAGE) where you don't want to", "                  consume vast amounts of disk space interpolating", "                  the low resolution data to some artificially fine", "                  (and meaningless) spatial grid.", "", "----------------------------------------------", "DEFINITION OF AFFINE TRANSFORMATION PARAMETERS", "----------------------------------------------", "The 3x3 spatial transformation matrix is calculated as [S][D][U],", "where [S] is the shear matrix,", "      [D] is the scaling matrix, and", "      [U] is the rotation (proper orthogonal) matrix.", "Thes matrices are specified in DICOM-ordered (x=-R+L,y=-A+P,z=-I+S)", "coordinates as:", "", "  [U] = [Rotate_y(param#6)] [Rotate_x(param#5)] [Rotate_z(param #4)]", "        (angles are in degrees)", "", "  [D] = diag( param#7 , param#8 , param#9 )", "", "        [    1        0     0 ]        [ 1 param#10 param#11 ]", "  [S] = [ param#10    1     0 ]   OR   [ 0    1     param#12 ]", "        [ param#11 param#12 1 ]        [ 0    0        1     ]", "", "The shift vector comprises parameters #1, #2, and #3.", "", "The goal of the program is to find the warp parameters such that", "   I([x]_warped) 'is similar to' J([x]_in)", "as closely as possible in some sense of 'similar', where J(x) is the", "base image, and I(x) is the source image.", "", "Using '-parfix', you can specify that some of these parameters", "are fixed.  For example, '-shift_rotate_scale' is equivalent", "'-affine_general -parfix 10 0 -parfix 11 0 -parfix 12 0'.", "Don't even think of using the '-parfix' option unless you grok", "this example!", "", "----------- Special Note for the '-EPI' Option's Coordinates -----------", "In this case, the parameters above are with reference to coordinates", "  x = frequency encoding direction (by default, first axis of dataset)", "  y = phase encoding direction     (by default, second axis of dataset)", "  z = slice encoding direction     (by default, third axis of dataset)", "This option lets you freeze some of the warping parameters in ways that", "make physical sense, considering how echo-planar images are acquired.", "The x- and z-scaling parameters are disabled, and shears will only affect", "the y-axis.  Thus, there will be only 9 free parameters when '-EPI' is", "used.  If desired, you can use a '-parang' option to allow the scaling", "fixed parameters to vary (put these after the '-EPI' option):", "  -parang 7 0.833 1.20     to allow x-scaling", "  -parang 9 0.833 1.20     to allow z-scaling", "You could also fix some of the other parameters, if that makes sense", "in your situation; for example, to disable out-of-slice rotations:", "  -parfix 5 0  -parfix 6 0", "and to disable out of slice translation:", "  -parfix 3 0", "NOTE WELL: If you use '-EPI', then the output warp parameters (e.g., in", "           '-1Dparam_save') apply to the (freq,phase,slice) xyz coordinates,", "           NOT to the DICOM xyz coordinates, so equivalent transformations", "           will be expressed with different sets of parameters entirely", "           than if you don't use '-EPI'!  This comment does NOT apply", "           to the output of '-1Dmatrix_save', since that matrix is", "           defined relative to the RAI (DICOM) spatial coordinates.", "", "*********** CHANGING THE ORDER OF MATRIX APPLICATION ***********", "", "  -SDU or -SUD }= Set the order of the matrix multiplication", "  -DSU or -DUS }= for the affine transformations:", "  -USD or -UDS }=   S = triangular shear (params #10-12)", "                    D = diagonal scaling matrix (params #7-9)", "                    U = rotation matrix (params #4-6)", "                  Default order is '-SDU', which means that", "                  the U matrix is applied first, then the", "                  D matrix, then the S matrix.", "", "  -Supper      }= Set the S matrix to be upper or lower", "  -Slower      }= triangular [Default=lower triangular]", "", "  -ashift OR   }= Apply the shift parameters (#1-3) after OR", "  -bshift      }= before the matrix transformation. [Default=after]", "", "            ==================================================", "        ===== RWCox - September 2006 - Live Long and Prosper =====", "            ==================================================", "", "         ********************************************************", "        *** From Webster's Dictionary: Allineate == 'to align' ***", "         ********************************************************", "", "===========================================================================", "                       FORMERLY SECRET HIDDEN OPTIONS", "---------------------------------------------------------------------------", "        ** N.B.: Most of these are experimental! [permanent beta] **", "===========================================================================", "", " -num_rtb n  = At the beginning of the fine pass, the best set of results", "               from the coarse pass are 'refined' a little by further", "               optimization, before the single best one is chosen for", "               for the final fine optimization.", "              * This option sets the maximum number of cost functional", "                evaluations to be used (for each set of parameters)", "                in this step.", "              * The default is 99; a larger value will take more CPU", "                time but may give more robust results.", "              * If you want to skip this step entirely, use '-num_rtb 0'.", "                then, the best of the coarse pass results is taken", "                straight to the final optimization passes.", "       **N.B.: If you use '-VERB', you will see that one extra case", "               is involved in this initial fine refinement step; that", "               case is starting with the identity transformation, which", "               helps insure against the chance that the coarse pass", "               optimizations ran totally amok.", " -nocast     = By default, parameter vectors that are too close to the", "               best one are cast out at the end of the coarse pass", "               refinement process. Use this option if you want to keep", "               them all for the fine resolution pass.", " -norefinal  = Do NOT re-start the fine iteration step after it", "               has converged.  The default is to re-start it, which", "               usually results in a small improvement to the result", "               (at the cost of CPU time).  This re-start step is an", "               an attempt to avoid a local minimum trap.  It is usually", "               not necessary, but sometimes helps.", "", " -realaxes   = Use the 'real' axes stored in the dataset headers, if they", "               conflict with the default axes.  [For Jedi AFNI Masters only!]", "", " -savehist sss = Save start and final 2D histograms as PGM", "                 files, with prefix 'sss' (cost: cr mi nmi hel).", "                * if filename contains 'FF', floats is written", "                * these are the weighted histograms!", "                * -savehist will also save histogram files when", "                  the -allcost evaluations takes place", "                * this option is mostly useless unless '-histbin' is", "                  also used", " -median       = Smooth with median filter instead of Gaussian blur.", "                 (Somewhat slower, and not obviously useful.)", " -powell m a   = Set the Powell NEWUOA dimensional parameters to", "                 'm' and 'a' (cf. source code in powell_int.c).", "                 The number of points used for approximating the", "                 cost functional is m*N+a, where N is the number", "                 of parameters being optimized.  The default values", "                 are m=2 and a=3.  Larger values will probably slow", "                 the program down for no good reason.  The smallest", "                 allowed values are 1.", " -target ttt   = Same as '-source ttt'.  In the earliest versions,", "                 what I now call the 'source' dataset was called the", "                 'target' dataset:", "                    Try to remember the kind of September (2006)", "                    When life was slow and oh so mellow", "                    Try to remember the kind of September", "                    When grass was green and source was target.", " -Xwarp       =} Change the warp/matrix setup so that only the x-, y-, or z-", " -Ywarp       =} axis is stretched & sheared.  Useful for EPI, where 'X',", " -Zwarp       =} 'Y', or 'Z' corresponds to the phase encoding direction.", " -FPS fps      = Generalizes -EPI to arbitrary permutation of directions.", " -histpow pp   = By default, the number of bins in the histogram used", "                 for calculating the Hellinger, Mutual Information, and", "                 Correlation Ratio statistics is n^(1/3), where n is", "                 the number of data points.  You can change that exponent", "                 to 'pp' with this option.", " -histbin nn   = Or you can just set the number of bins directly to 'nn'.", " -eqbin   nn   = Use equalized marginal histograms with 'nn' bins.", " -clbin   nn   = Use 'nn' equal-spaced bins except for the bot and top,", "                 which will be clipped (thus the 'cl').  If nn is 0, the", "                 program will pick the number of bins for you.", "                 **N.B.: '-clbin 0' is now the default [25 Jul 2007];", "                         if you want the old all-equal-spaced bins, use", "                         '-histbin"], "params": [{"param_range": [1000, 1008], "help_range": [999, 4395]}, {"param_range": [4399, 4403], "help_range": [4397, 4457]}, {"param_range": [4460, 4464], "help_range": [4458, 4507]}, {"param_range": [4510, 4514], "help_range": [4508, 4845]}, {"param_range": [4849, 4856], "help_range": [4864, 4902]}, {"param_range": [4905, 4912], "help_range": [4920, 4958]}, {"param_range": [4962, 4969], "help_range": [4977, 5020]}, {"param_range": [5023, 5030], "help_range": [5038, 5834]}, {"param_range": [5837, 5845], "help_range": [5851, 6915]}, {"param_range": [6917, 6924], "help_range": [6931, 7178]}, {"param_range": [7180, 7190], "help_range": [7194, 7569]}, {"param_range": [7572, 7581], "help_range": [7586, 7722]}, {"param_range": [7725, 7734], "help_range": [7741, 8179]}, {"param_range": [8181, 8188], "help_range": [8197, 8310]}, {"param_range": [8312, 8319], "help_range": [8328, 8812]}, {"param_range": [8814, 8821], "help_range": [8830, 9226]}, {"param_range": [9228, 9234], "help_range": [9243, 9303]}, {"param_range": [9305, 9311], "help_range": [9320, 9377]}], "previous": "3dAllineate_part6.json", "next": "3dAllineate_part8.json"}